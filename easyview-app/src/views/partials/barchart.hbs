<div class="col-span-1 lg:col-span-2 bg-white p-5 rounded-xl shadow">
  <h2 class="text-lg font-semibold mb-2">Weekly Waste Sorted</h2>
  <div style="overflow-x: scroll; width: 100%; max-width: 100%">
    <canvas id="{{chartId}}" height="250" style="width: auto; height: auto;"></canvas>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const ctx = document.getElementById("{{chartId}}");
      if (ctx) {
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: {{{JSONstringify weeklyLabels}}},
            datasets: [{
              label: 'Waste (kg)',
              data: {{{JSONstringify weeklyData}}},
              backgroundColor: 'rgba(75, 192, 75, 0.6)',
              borderColor: 'rgba(75, 192, 75, 1)',
              borderWidth: 1,
              borderRadius: 4,
              barThickness: 30  // Fixed bar width
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  stepSize: 5
                }
              },
              x: {
                ticks: {
                  autoSkip: false
                },
                offset: true,
                categoryPercentage: 0.8, // Controls the width of bars relative to available space
                barPercentage: 0.9  // Adjusts spacing between bars
              }
            }
          }
        });
      }
    });
  </script>
</div>
